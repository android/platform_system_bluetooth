{
  "comments": [
    {
      "key": {
        "uuid": "AAAA4n////w\u003d",
        "filename": "bluedroid/bluetooth.c",
        "patchSetId": 1
      },
      "lineNbr": 58,
      "author": {
        "id": 1001002
      },
      "writtenOn": "2010-08-09T16:19:09Z",
      "side": 1,
      "message": "Use the style from this file\nsysdir \u003d opendir();\nif (!sysdir) {...}",
      "revId": "5e0fc858316dbbd6160d3e61655f5352243f0689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA4n///6I\u003d",
        "filename": "bluedroid/bluetooth.c",
        "patchSetId": 1
      },
      "lineNbr": 58,
      "author": {
        "id": 1003004
      },
      "writtenOn": "2010-08-10T01:59:25Z",
      "side": 1,
      "message": "OK.",
      "parentUuid": "AAAA4n////w\u003d",
      "revId": "5e0fc858316dbbd6160d3e61655f5352243f0689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA4n////s\u003d",
        "filename": "bluedroid/bluetooth.c",
        "patchSetId": 1
      },
      "lineNbr": 63,
      "author": {
        "id": 1001002
      },
      "writtenOn": "2010-08-09T16:19:09Z",
      "side": 1,
      "message": "Use style for this file.\nwhile (true) {\n    entry \u003d readdir(sysdir);\n    if (!entry)\n        break;\n    ...",
      "revId": "5e0fc858316dbbd6160d3e61655f5352243f0689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA4n///54\u003d",
        "filename": "bluedroid/bluetooth.c",
        "patchSetId": 1
      },
      "lineNbr": 63,
      "author": {
        "id": 1003004
      },
      "writtenOn": "2010-08-10T01:59:25Z",
      "side": 1,
      "message": "Oh, I doubt if this style is better. Actually I just try to follow most of the Android code does. A quick check by \u0027git grep readdir\u0027 in system/core shows all of readdir use while((entry \u003d readdir(dir))) or while ((entry \u003d readdir(dir)) !\u003d 0) style.\n\nBesides, since \u0027true\u0027 is not a valid keyword of C, we have to worry how it is defined if using while (true) style.\n\nI suggest just use while((entry \u003d readdir(dir)))",
      "parentUuid": "AAAA4n////s\u003d",
      "revId": "5e0fc858316dbbd6160d3e61655f5352243f0689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA4n////o\u003d",
        "filename": "bluedroid/bluetooth.c",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1001002
      },
      "writtenOn": "2010-08-09T16:19:09Z",
      "side": 1,
      "message": "logic is unnecessary complex\nif (!strcmp() || !strcmp())",
      "revId": "5e0fc858316dbbd6160d3e61655f5352243f0689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA4n///5w\u003d",
        "filename": "bluedroid/bluetooth.c",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1003004
      },
      "writtenOn": "2010-08-10T01:59:25Z",
      "side": 1,
      "message": "Hmm, then how about just use if (entry-\u003ed_name[0] \u003d\u003d \u0027.\u0027) ?\nThat means any .* will be ignored, much simpler.",
      "parentUuid": "AAAA4n////o\u003d",
      "revId": "5e0fc858316dbbd6160d3e61655f5352243f0689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA4n////g\u003d",
        "filename": "bluedroid/bluetooth.c",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 1001002
      },
      "writtenOn": "2010-08-09T16:19:09Z",
      "side": 1,
      "message": "unnecessary temporary variable",
      "revId": "5e0fc858316dbbd6160d3e61655f5352243f0689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA4n////c\u003d",
        "filename": "bluedroid/bluetooth.c",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1001002
      },
      "writtenOn": "2010-08-09T16:19:09Z",
      "side": 1,
      "message": "You leak memory here. Instead use statically assigned rfkill_state_path with length 64, and use snprintf here. No need for a temporary variable. Also check for failures within the nest, the success path should not be nested",
      "revId": "5e0fc858316dbbd6160d3e61655f5352243f0689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA4n///5o\u003d",
        "filename": "bluedroid/bluetooth.c",
        "patchSetId": 1
      },
      "lineNbr": 76,
      "author": {
        "id": 1003004
      },
      "writtenOn": "2010-08-10T01:59:25Z",
      "side": 1,
      "message": "It\u0027s freed in bt_disable(). Could you explain why memory leaks?\n\nHowever, I agree it\u0027s better to use sprintf. (asprintf is not a standard C function. I just tried to follow the original api, but fixed the unlikely failure case)",
      "parentUuid": "AAAA4n////c\u003d",
      "revId": "5e0fc858316dbbd6160d3e61655f5352243f0689",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}